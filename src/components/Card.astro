---
interface Props {
  img?: any;
  champion?: string | boolean;
  sinceYear?: string;
  title?: string;
  backImage?: any;
  stats?: Array<{ label: string; value: string | number }>;
}

const {
  img,
  champion = false,
  sinceYear,
  title,
  backImage,
  stats = [],
} = Astro.props;
---

<div class="card-container w-[252px] h-[352px] rounded-3xl p-[9px]">
  <div class="card-flip w-full h-full">
    <div class="card-front w-full h-full rounded-2xl">
      {
        img && (
          <img
            src={img.src || img}
            alt="Card Image"
            class="w-full h-full object-cover rounded-2xl"
          />
        )
      }
    </div>
    <div class="card-back w-full h-full rounded-2xl">
      <div class="card-back-content">
        <!-- Top Labels -->
        <div class="card-labels">
          {
            champion && (
              <div class="label-champion">
                {typeof champion === "string" ? champion : "CHAMPION"}
              </div>
            )
          }
          {sinceYear && <div class="label-since">{sinceYear}</div>}
        </div>

        <!-- Title -->
        {title && <h2 class="card-title">{title}</h2>}

        <!-- Main Content Area -->
        <div class="card-main-content">
          <!-- Image Placeholder/Content -->
          <div class="card-image-area">
            {
              backImage ? (
                <img
                  src={backImage.src || backImage}
                  alt="Card back image"
                  class="card-back-img"
                />
              ) : (
                <div class="card-image-placeholder" />
              )
            }
          </div>

          <!-- Stats -->
          {
            stats.length > 0 && (
              <div class="card-stats">
                {stats.map((stat) => (
                  <div class="stat-item">
                    <div class="stat-label">{stat.label}</div>
                    <div class="stat-value">{stat.value}</div>
                  </div>
                ))}
              </div>
            )
          }
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card-container {
    background-image: url("../assets/card-border.jpg");
    background-size: cover;
    background-position: center;
    box-sizing: border-box;
    perspective: 1000px;
    position: relative;
  }

  .card-container::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgb(0, 0, 0);
    border-radius: 23px;
    z-index: 1;
    pointer-events: none;
    opacity: 0.8;
    transition: opacity 0.6s;
  }

  .card-container:hover::before {
    opacity: 0;
  }

  .card-flip {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    transition: transform 0.6s;
    z-index: 2;
  }

  .card-container:hover .card-flip {
    transform: rotateY(180deg);
  }

  .card-front,
  .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    background-image: url("../assets/card-background.jpg");
    background-size: cover;
    background-position: center;
    box-sizing: border-box;
  }

  .card-back {
    transform: rotateY(180deg);
    padding: 18px;
    overflow: hidden;
    background-image: url("../assets/card-background.jpg");
    background-size: cover;
    background-position: center;
    position: relative;
  }

  .card-back::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    border-radius: 16px;
    z-index: 0;
  }

  .card-back-content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: white;
    font-family: "Oswald", sans-serif;
    position: relative;
    z-index: 1;
  }

  .card-labels {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 8px;
    flex: 0 0 auto;
  }

  .label-champion {
    background-color: #ffd000;
    color: #000;
    padding: 2px 8px;
    border-radius: 8px;
    font-size: 17px;
    font-weight: 400;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: "Oswald", sans-serif;
  }

  .label-since {
    background-color: #e399ff;
    color: #000;
    padding: 2px 8px;
    border-radius: 8px;
    font-size: 17px;
    font-weight: 400;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-family: "Oswald", sans-serif;
  }

  .card-title {
    font-size: 36px;
    font-weight: 500;
    text-transform: uppercase;
    color: white;
    text-align: left;
    letter-spacing: 0.25px;
    line-height: 1;
    font-family: "Oswald", sans-serif;
    flex: 0 0 auto;
    margin: auto 0;
  }

  .card-main-content {
    display: flex;
    gap: 12px;
    flex: 0 0 auto;
    align-items: flex-end;
  }

  .card-image-area {
    flex: 1;
    min-width: 0;
  }

  .card-image-placeholder {
    width: 117px;
    height: 117px;
    background-color: #6b7280;
    border-radius: 8px;
    min-height: 120px;
  }

  .card-back-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
    min-height: 120px;
  }

  .card-stats {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    gap: 8px;
    flex: 0 0 auto;
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .stat-label {
    font-size: 15px;
    text-transform: uppercase;
    color: white;
    letter-spacing: 0.5px;
    margin-bottom: 2px;
    font-family: "Oswald", sans-serif;
    font-weight: 400;
  }

  .stat-value {
    font-size: 32px;
    font-weight: 700;
    color: white;
    line-height: 1;
    font-family: "Oswald", sans-serif;
  }
</style>
